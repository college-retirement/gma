commands:
  - tag: insert
    section: writing_data
    order: 0
    description: |
      Insert JSON documents into a table. Accepts a single JSON
      document or an array of documents.  You may also pass the
      optional argument <code>durability</code> with value
      <code>'hard'</code> or <code>'soft'</code>, to override the
      table or query's default durability setting, or the optional argument <code>return_vals</code>, which will return the value of the row you're inserting (and the old value if you use <code>upsert</code>) when set to true.<br/><br/>
      Insert returns an object that contains the following attributes:
      <ul>
      <li><code>inserted</code> - the number of documents that were succesfully inserted;</li>
      <li><code>replaced</code> - the number of documents that were updated when <code>upsert</code> is used;</li>
      <li><code>unchanged</code> - the number of documents that would have been modified, except that the new
      value was the same as the old value when doing an <code>upsert</code>;</li>
      <li><code>errors</code> - the number of errors encountered while inserting;</li>
      <li>if errors where encountered while inserting, <code>first_error</code> contains the text of the first error;</li>
      <li><code>generated_keys</code> - a list of generated primary key values;</li>
      <li><code>deleted</code> and <code>skipped</code>
      - <code>0</code> for an <code>insert</code> operation.</li>
      </ul>

    body:
      js: "$PARENT.insert(json | [json][, {durability: 'soft', returnVals: true, upsert:true}])"
      py: "$PARENT.insert(json | [json][, durability='soft', return_vals=True, upsert=True])"
      rb: "$PARENT.insert(json | [json][, { :durability => 'soft', :return_vals => true :upsert => true}])"
      ph: "$PARENT->insert(json[, opts]) | $PARENT->insert(array(json1, json2, ...)[, opts])"

    io:
      - - table
        - object

    examples:
      - description: Insert a row into a table named 'marvel'.
        code:
          js: |
            r.table('marvel').insert({ superhero: 'Iron Man', superpower: 'Arc Reactor' })
             .run(conn, callback)
          py: |
            r.table('marvel').insert(
                { 'superhero': 'Iron Man', 'superpower':'Arc Reactor' }).run(conn)
          rb: |
            r.table('marvel').insert(
                { :superhero => 'Iron Man', :superpower => 'Arc Reactor' }).run(conn)
          ph: |
            r\table('marvel')->insert( 
                array( 'superhero' => 'Iron Man', 'superpower' => 'Arc Reactor' ))->run($conn);
      - description: Insert multiple rows into a table named 'marvel'.  Also, specify that only soft durability is required.
        code:
          js: |
            r.table('marvel').insert([
              { superhero: 'Wolverine', superpower: 'Adamantium' },
              { superhero: 'Spiderman', superpower: 'spidy sense' }
            ], { durability: 'soft' }).run(conn, callback)
          py: |
            r.table('marvel').insert([
              { 'superhero': 'Wolverine', 'superpower': 'Adamantium' },
              { 'superhero': 'Spiderman', 'superpower': 'spidy sense' }
            ], durability='soft').run(conn)
          rb: |
            r.table('marvel').insert([
              {:superhero => 'Wolverine', :superpower => 'Adamantium'},
              {:superhero => 'Spiderman', :superpower => 'spidy sense'}
            ], :durability => 'soft').run(conn)
          ph: |
            r\table('marvel')->insert(array(
                array( 'superhero' => 'Wolverine', 'superpower' => 'Adamantium' ),
                array( 'superhero' => 'Spiderman', 'superpower' => 'spidy sense' )
              ), array('durability' => 'soft'))->run($conn);
      - description: Insert a row into a table named 'marvel', overwriting if the document already exists.
        code:
          js: |
            r.table('marvel').insert(
              { superhero: 'Iron Man', superpower: 'Arc Reactor' },
              {upsert: true}
            ).run(conn, callback)
          py: |
            r.table('marvel').insert(
              { 'superhero': 'Iron Man', 'superpower': 'Arc Reactor' },
              upsert=True
            ).run(conn)
          rb: |
            r.table('marvel').insert(
              {:superhero => 'Iron Man', :superpower => 'Arc Reactor' },
              {:upsert => true }
            ).run(conn)
          ph: |
            r\table('marvel')->insert( 
                array( 'superhero' => 'Iron Man', 'superpower' => 'Arc Reactor' ),
                array('upsert' => true))->run($conn);
      - description: Get back a copy of the new row, this is useful if you've done an upsert or generated an ID.
        code:
          js: |
            r.table('marvel').insert(
              { superhero: 'Iron Man', superpower: 'Arc Reactor' },
              {upsert: true, return_vals: true}
            ).run(conn, callback)
          py: |
            r.table('marvel').insert(
              { 'superhero': 'Iron Man', 'superpower': 'Arc Reactor' },
              upsert=True, return_vals=True
            ).run(conn)
          rb: |
            r.table('marvel').insert(
              {:superhero => 'Iron Man', :superpower => 'Arc Reactor' },
              {:upsert => true , :return_vals => true}
            ).run(conn)
          ph: |
            r\table('marvel')->insert( 
                array( 'superhero' => 'Iron Man', 'superpower' => 'Arc Reactor' ),
                array('upsert' => true, 'return_vals' => true))->run($conn);


